import{F as x}from"./index-e09ccffb.js";import{g as w,i as t,o as A,c as T,b as e,d as n,t as l,u as o,_ as F}from"./app-78262cf9.js";const N="https://restapi.amap.com/v3/ip?key=e641661b0dfbf7ffa23a2110d44f38de&city=110000",V=async(v,s)=>(s&&await new Promise((c,a)=>setTimeout(()=>{a(new Error("error"))},1e3)),(await fetch(N,{signal:v})).json()),j={class:"demo-container"},q=w({__name:"fetchChild",setup(v){const s=t(""),u=t(""),c=t(""),a=t(""),i=t(""),f=t(""),m=()=>{s.value="onCancel triggered"},_=()=>{u.value="onCache triggered"},S=()=>{c.value="onBefore triggered"},y=()=>{a.value="onAfter triggered"},b=()=>{i.value="onSuccess triggered"},k=()=>{f.value="onError triggered"},B=()=>{p.value=null,d.value=!1,h.value=null,s.value="",u.value="",c.value="",a.value="",i.value="",f.value=""},{result:p,loading:d,error:h,run:g,cancel:C}=x(V,{retryTimes:3,cacheTime:3e3,onCancel:m,onCache:_,onBefore:S,onAfter:y,onSuccess:b,onError:k});return(D,r)=>(A(),T("div",j,[e("h3",null,[n("result: "),e("span",null,l(o(p)),1)]),e("h3",null,[n("loading: "),e("span",null,l(o(d)),1)]),e("h3",null,[n("error: "),e("span",null,l(o(h)),1)]),e("h3",null,[n("onCancel: "),e("span",null,l(s.value),1)]),e("h3",null,[n("onCache: "),e("span",null,l(u.value),1)]),e("h3",null,[n("onBefore: "),e("span",null,l(c.value),1)]),e("h3",null,[n("onAfter: "),e("span",null,l(a.value),1)]),e("h3",null,[n("onSuccess: "),e("span",null,l(i.value),1)]),e("h3",null,[n("onError: "),e("span",null,l(f.value),1)]),e("button",{class:"primary",onClick:r[0]||(r[0]=()=>o(g)())},"run"),e("button",{onClick:r[1]||(r[1]=(...E)=>o(C)&&o(C)(...E))},"cancel"),e("button",{onClick:r[2]||(r[2]=()=>o(g)(!0))},"runError"),e("button",{onClick:B},"reset")]))}});const G=F(q,[["__file","fetchChild.vue"]]);export{G as default};
