import{I as A}from"./index-713f3dfe.js";import{x as S,B as a,Q as p,T as k,V as e,W as o,$ as l,a0 as r,P as b,a3 as J,a4 as O}from"./clientConfigs-409c9da3.js";const P="https://restapi.amap.com/v3/ip?key=e641661b0dfbf7ffa23a2110d44f38de",R=async(f,n)=>(n&&await new Promise((i,c)=>setTimeout(()=>{c(new Error("error"))},1e3)),(await fetch(P,{signal:f})).json()),j={class:"demo-container"},q=S({__name:"fetchChild",setup(f){const n=a(""),u=a(""),i=a(""),c=a(""),v=a(""),d=a(""),y=()=>{n.value="onCancel triggered"},B=s=>{u.value=`onCache triggered: ${JSON.stringify(s)}`},E=()=>{i.value="onBefore triggered"},x=()=>{c.value="onAfter triggered"},V=s=>{v.value=`onSuccess triggered: ${JSON.stringify(s)}`,console.log(s)},$=s=>{d.value=`onError triggered: ${s}`},N=()=>{h.value=null,m.value=!1,g.value=null,n.value="",u.value="",i.value="",c.value="",v.value="",d.value=""},{result:h,loading:m,error:g,run:C,forceRun:T,cancel:_}=A(R,{retryTimes:3,cacheTime:3e3,onCancel:y,onCache:B,onBefore:E,onAfter:x,onSuccess:V,onError:$});return(s,t)=>(p(),k("div",j,[e("h3",null,[o("result: "),e("span",null,l(r(h)),1)]),e("h3",null,[o("loading: "),e("span",null,l(r(m)),1)]),e("h3",null,[o("error: "),e("span",null,l(r(g)),1)]),e("h3",null,[o("onCancel: "),e("span",null,l(n.value),1)]),e("h3",null,[o("onCache: "),e("span",null,l(u.value),1)]),e("h3",null,[o("onBefore: "),e("span",null,l(i.value),1)]),e("h3",null,[o("onAfter: "),e("span",null,l(c.value),1)]),e("h3",null,[o("onSuccess: "),e("span",null,l(v.value),1)]),e("h3",null,[o("onError: "),e("span",null,l(d.value),1)]),e("button",{class:"primary",onClick:t[0]||(t[0]=()=>r(C)())},"run"),e("button",{onClick:t[1]||(t[1]=()=>r(T)())},"forceRun"),e("button",{onClick:t[2]||(t[2]=(...w)=>r(_)&&r(_)(...w))},"cancel"),e("button",{onClick:t[3]||(t[3]=()=>r(C)(!0))},"runError"),e("button",{onClick:N},"reset")]))}}),D=b(q,[["__file","fetchChild.vue"]]),F={class:"demo-container"},I=e("br",null,null,-1),Q=e("br",null,null,-1),W=S({__name:"fetch",setup(f){const n=a(!0),u=()=>{n.value=!n.value};return(i,c)=>(p(),k("div",F,[e("button",{class:"primary",onClick:u},"toggleChild"),I,Q,n.value?(p(),J(D,{key:0})):O("v-if",!0)]))}}),H=b(W,[["__file","fetch.vue"]]);export{H as default};
