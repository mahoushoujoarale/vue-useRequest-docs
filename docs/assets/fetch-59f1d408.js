import{I as F}from"./index-572115a7.js";import{x as y,B as s,Q as d,T as S,W as e,X as t,$ as r,a0 as i,P as b,a3 as J,a4 as P}from"./clientConfigs-a5b6559c.js";const U="https://restapi.amap.com/v3/ip",k="e641661b0dfbf7ffa23a2110d44f38de",q=async(f,n)=>{const a=new URL(U);Object.keys(n).forEach(c=>{a.searchParams.append(c,n[c])});const l=await(await fetch(a,{signal:f})).json();if(l.status!=="1")throw new Error(l.info);return l},D={class:"demo-container"},I=y({__name:"fetchChild",setup(f){const n=s(""),a=s(""),u=s(""),l=s(""),c=s(""),h=s(""),B=()=>{n.value="onCancel triggered"},E=o=>{a.value=`onCache triggered: ${JSON.stringify(o)}`},x=()=>{u.value="onBefore triggered"},R=()=>{l.value="onAfter triggered"},$=o=>{c.value=`onSuccess triggered: ${JSON.stringify(o)}`},w=o=>{h.value=`onError triggered: ${o}`},N=()=>{p.value=null,v.value=!1,m.value=null,n.value="",a.value="",u.value="",l.value="",c.value="",h.value=""},{result:p,loading:v,error:m,run:_,forceRun:V,cancel:C}=F(q,{retryTimes:3,cacheTime:3e3,onCancel:B,onCache:E,onBefore:x,onAfter:R,onSuccess:$,onError:w}),A=()=>{_({key:k})},T=()=>{V({key:k})},O=()=>{_({key:"badkey"})};return(o,g)=>(d(),S("div",D,[e("h3",null,[t("result: "),e("span",null,r(i(p)),1)]),e("h3",null,[t("loading: "),e("span",null,r(i(v)),1)]),e("h3",null,[t("error: "),e("span",null,r(i(m)),1)]),e("h3",null,[t("onCancel: "),e("span",null,r(n.value),1)]),e("h3",null,[t("onCache: "),e("span",null,r(a.value),1)]),e("h3",null,[t("onBefore: "),e("span",null,r(u.value),1)]),e("h3",null,[t("onAfter: "),e("span",null,r(l.value),1)]),e("h3",null,[t("onSuccess: "),e("span",null,r(c.value),1)]),e("h3",null,[t("onError: "),e("span",null,r(h.value),1)]),e("button",{class:"primary",onClick:A},"run"),e("button",{onClick:T},"forceRun"),e("button",{onClick:g[0]||(g[0]=(...j)=>i(C)&&i(C)(...j))},"cancel"),e("button",{onClick:O},"runError"),e("button",{onClick:N},"reset")]))}}),K=b(I,[["__file","fetchChild.vue"]]),L={class:"demo-container"},Q=e("br",null,null,-1),W=e("br",null,null,-1),X=y({__name:"fetch",setup(f){const n=s(!0),a=()=>{n.value=!n.value};return(u,l)=>(d(),S("div",L,[e("button",{class:"primary",onClick:a},"toggleChild"),Q,W,n.value?(d(),J(K,{key:0})):P("v-if",!0)]))}}),H=b(X,[["__file","fetch.vue"]]);export{H as default};
