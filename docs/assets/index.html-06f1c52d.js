import{_ as c,r as l,o as i,c as d,b as e,d as n,e as a,w as s,a as o}from"./app-c39531cc.js";const h={},u=o(`<h1 id="api参考" tabindex="-1"><a class="header-anchor" href="#api参考" aria-hidden="true">#</a> API参考</h1><p>useRequest通常由<a href="#return-values">Return Values</a>、<a href="#service">Service</a>、<a href="#options">Options</a>三部分组成：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token operator">...</span>ReturnValues <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRequest</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">P</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>Service<span class="token punctuation">,</span> Options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),p=e("div",{class:"custom-container tip"},[e("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[e("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"9"}),e("path",{d:"M12 8h.01"}),e("path",{d:"M11 12h1v4h1"})])]),e("p",{class:"custom-container-title"},"TIP"),e("p",null,[n("P、R分别是"),e("a",{href:"#service"},"Service"),n("自身参数和返回数据的泛型。")])],-1),f=o('<h2 id="return-values" tabindex="-1"><a class="header-anchor" href="#return-values" aria-hidden="true">#</a> Return Values</h2><h3 id="result" tabindex="-1"><a class="header-anchor" href="#result" aria-hidden="true">#</a> result</h3><ul><li>类型：<code>shallowRef&lt;R | null&gt;</code></li><li>默认值 <code>null</code></li></ul><p>请求返回的数据。</p><h3 id="loading" tabindex="-1"><a class="header-anchor" href="#loading" aria-hidden="true">#</a> loading</h3><ul><li>类型：<code>shallowRef&lt;boolean&gt;</code></li><li>默认值 <code>false</code></li></ul><p><a href="#service">Service</a>请求的执行状态。</p><h3 id="error" tabindex="-1"><a class="header-anchor" href="#error" aria-hidden="true">#</a> error</h3><ul><li>类型：<code>shallowRef&lt;Error | null&gt;</code></li><li>默认值 <code>null</code></li></ul><p>如果请求过程中发生错误，会被<code>error</code>接收并返回。</p>',10),_=e("div",{class:"custom-container tip"},[e("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[e("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"9"}),e("path",{d:"M12 8h.01"}),e("path",{d:"M11 12h1v4h1"})])]),e("p",{class:"custom-container-title"},"TIP"),e("p",null,"如果请求被取消，将不会修改error的值。")],-1),w=o('<h3 id="run" tabindex="-1"><a class="header-anchor" href="#run" aria-hidden="true">#</a> run</h3><ul><li>类型：<code>(...params: P) = &gt; shallowRef&lt;R | Error&gt;</code></li></ul><p>触发<a href="#service">Service</a>请求，返回请求的结果。</p><h3 id="forcerun" tabindex="-1"><a class="header-anchor" href="#forcerun" aria-hidden="true">#</a> forceRun</h3><ul><li>类型：<code>(...params: P) = &gt; shallowRef&lt;R | Error&gt;</code></li></ul><p>强制触发<a href="#service">Service</a>请求，忽略缓存和已在进行中请求，返回请求的结果。</p><h3 id="cancel" tabindex="-1"><a class="header-anchor" href="#cancel" aria-hidden="true">#</a> cancel</h3><ul><li>类型：<code>() =&gt; void</code></li></ul>',8),v=e("a",{href:"#service"},"Service",-1),x={href:"https://developer.mozilla.org/en-US/docs/Web/API/AbortController",target:"_blank",rel:"noopener noreferrer"},k=e("h2",{id:"service",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#service","aria-hidden":"true"},"#"),n(" Service")],-1),g=e("ul",null,[e("li",null,[n("类型："),e("code",null,"(signal: AbortSignal, ...params: P) => Promise<R>")])],-1),m=e("code",null,"useRequest",-1),b=e("h2",{id:"options",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#options","aria-hidden":"true"},"#"),n(" Options")],-1),R=e("h3",{id:"cancellastrequest",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#cancellastrequest","aria-hidden":"true"},"#"),n(" cancelLastRequest")],-1),P=e("ul",null,[e("li",null,[n("类型："),e("code",null,"boolean")]),e("li",null,[n("默认值 "),e("code",null,"true")])],-1),S=e("p",null,"是否取消上次尚未完成的请求。",-1),T=e("div",{class:"custom-container tip"},[e("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[e("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"9"}),e("path",{d:"M12 8h.01"}),e("path",{d:"M11 12h1v4h1"})])]),e("p",{class:"custom-container-title"},"TIP"),e("p",null,[n("当"),e("a",{href:"#uselastrequest"},"useLastRequest"),n("为true时，将忽略该项设置。")])],-1),C=o('<h3 id="cancelondispose" tabindex="-1"><a class="header-anchor" href="#cancelondispose" aria-hidden="true">#</a> cancelOnDispose</h3><ul><li>类型：<code>boolean</code></li><li>默认值 <code>true</code></li></ul><p>是否在组件销毁时取消尚未完成的请求。</p><h3 id="uselastrequest" tabindex="-1"><a class="header-anchor" href="#uselastrequest" aria-hidden="true">#</a> useLastRequest</h3><ul><li>类型：<code>boolean</code></li><li>默认值 <code>false</code></li></ul><p>设置为true时，如果有尚未完成的请求，等待其响应，取消本次请求的发送。</p>',6),M=e("div",{class:"custom-container tip"},[e("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[e("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"9"}),e("path",{d:"M12 8h.01"}),e("path",{d:"M11 12h1v4h1"})])]),e("p",{class:"custom-container-title"},"TIP"),e("p",null,"当该项置为true，并且发起请求时仍有尚未完成的请求，那么该次请求不会触发onBefore、onAfter、onSuccess、onError。")],-1),q=e("h3",{id:"cachetime",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#cachetime","aria-hidden":"true"},"#"),n(" cacheTime")],-1),B=e("ul",null,[e("li",null,[n("类型："),e("code",null,"number")]),e("li",null,[n("默认值 "),e("code",null,"0")])],-1),E=e("a",{href:"#run"},"run",-1),I=o('<h3 id="onsuccess" tabindex="-1"><a class="header-anchor" href="#onsuccess" aria-hidden="true">#</a> onSuccess</h3><ul><li>类型：<code>&lt;T&gt;(result: T) =&gt; void;</code></li><li>默认值 <code>false</code></li></ul><p>请求成功时触发。</p><h3 id="oncache" tabindex="-1"><a class="header-anchor" href="#oncache" aria-hidden="true">#</a> onCache</h3><ul><li>类型：<code>&lt;T&gt;(result: T) =&gt; void;</code></li><li>默认值 <code>false</code></li></ul><p>从缓存中获取数据时触发。</p><h3 id="onerror" tabindex="-1"><a class="header-anchor" href="#onerror" aria-hidden="true">#</a> onError</h3><ul><li>类型：<code>(error: Error) =&gt; void;</code></li><li>默认值 <code>false</code></li></ul><p>请求错误时触发。</p>',9),y=e("div",{class:"custom-container tip"},[e("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[e("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"9"}),e("path",{d:"M12 8h.01"}),e("path",{d:"M11 12h1v4h1"})])]),e("p",{class:"custom-container-title"},"TIP"),e("p",null,"被取消的请求不会触发onError。")],-1),A=o('<h3 id="onbefore" tabindex="-1"><a class="header-anchor" href="#onbefore" aria-hidden="true">#</a> onBefore</h3><ul><li>类型：<code>() =&gt; void</code></li><li>默认值 <code>false</code></li></ul><p>请求开始前触发。</p><h3 id="onafter" tabindex="-1"><a class="header-anchor" href="#onafter" aria-hidden="true">#</a> onAfter</h3><ul><li>类型：<code>() =&gt; void</code></li><li>默认值 <code>false</code></li></ul><p>请求完成后触发。</p>',6),L=e("div",{class:"custom-container tip"},[e("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[e("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"9"}),e("path",{d:"M12 8h.01"}),e("path",{d:"M11 12h1v4h1"})])]),e("p",{class:"custom-container-title"},"TIP"),e("p",null,"被取消的请求不会触发onAfter。")],-1),V=e("h3",{id:"oncancel",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#oncancel","aria-hidden":"true"},"#"),n(" onCancel")],-1),j=e("ul",null,[e("li",null,[n("类型："),e("code",null,"() => void")]),e("li",null,[n("默认值 "),e("code",null,"false")])],-1),N=e("p",null,"请求被取消时触发。",-1);function O(z,D){const r=l("ExternalLinkIcon"),t=l("RouterLink");return i(),d("div",null,[u,p,f,_,w,e("p",null,[n("手动取消进行中的请求，如果正确配置了"),v,n("的第一个"),e("a",x,[n("AbortController"),a(r)]),n("类型的参数，那么能够真正取消网络请求，可参考"),a(t,{to:"/document/cancel.html"},{default:s(()=>[n("取消请求")]),_:1}),n("。")]),k,g,e("p",null,[n("网络请求，传递给"),m,n("的第一个参数，可参考"),a(t,{to:"/document/basic.html"},{default:s(()=>[n("基础用法")]),_:1}),n("。")]),b,R,P,S,T,C,M,q,B,e("p",null,[n("在cacheTime有效期内发起的"),E,n("请求，如果已有缓存数据，将直接返回缓存结果。单位为毫秒，可参考"),a(t,{to:"/document/cache.html"},{default:s(()=>[n("缓存")]),_:1}),n("。")]),I,y,A,L,V,j,N])}const W=c(h,[["render",O],["__file","index.html.vue"]]);export{W as default};
